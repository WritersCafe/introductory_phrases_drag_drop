<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Introductory Phrases: Comma or No Comma?</title>

<style>
/* ======================================
   BRAND COLORS (your palette)
====================================== */
:root{
  --pink: #ff6fa9;
  --rose: #f4c2c2;
  --latte: #b08968;
  --creme: #fff8e7;
 : #7fa37c;
  --charcoal: #2f3437;

  --accent: var(--pink);
  --accent-weak: #ffdbe8;
  --good: var(--sage);
  --bad: var(--pink);
  --border: #e0d4c9;
}

/* General page styling */
body{
  margin:0;
  font-family: "Segoe UI", system-ui, sans-serif;
  background: var(--creme);
  color: var(--charcoal);
  font-size: 20px;
  line-height: 1.75;
}

/* Header */
header{
  padding: 1.2rem .5rem;
  text-align: center;
  background: linear-gradient(90deg, var(--rose), #ffe7f2 70%, #fff);
  border-bottom: 4px solid var(--latte);
}

.title{
  margin: 0;
  font-size: 2rem;
  font-weight: 800;
}

.tagline{
  margin-top: .25rem;
  font-size: 1.1rem;
  color: var(--charcoal);
  opacity: .85;
}

/* Teacher Rule Box */
.teacher-box{
  max-width: 900px;
  margin: 1.1rem auto;
  padding: 1rem;
  display:flex;
  gap:1rem;
  border:2px solid var(--latte);
  background:#fff;
  border-radius:.8rem;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}

.teacher-box img{
  width:45px;
}

.teacher-box .rule{
  font-size:1.05rem;
}

/* Layout */
main{
  max-width:900px;
  margin: 1.5rem auto 3rem;
  padding: 0 1rem;
}

.toolbar{
  display:flex;
  justify-content:center;
  gap:.6rem;
  margin-bottom:1.2rem;
  flex-wrap:wrap;
}

button{
  padding:.55rem 1rem;
  border:none;
  border-radius:.6rem;
  font-weight:700;
  font-size: 1rem;
  background: var(--accent);
  color:#fff;
  cursor:pointer;
  box-shadow:0 3px 6px rgba(0,0,0,.12);
}

button.secondary{
  background: var(--charcoal);
}

button.ghost{
  background: var(--accent-weak);
  color: var(--accent);
}

/* Bank */
#bank{
  background:#fff2f6;
  border:2px dashed var(--border);
  border-radius:.75rem;
  padding:.7rem;
  min-height:80px;
  display:flex;
  gap:.6rem;
  flex-wrap:wrap;
  margin-bottom:1.5rem;
}

/* Tokens */
.token{
  background:#fff;
  border:2px solid var(--accent);
  border-radius:.7rem;
  padding:.35rem .55rem;
  font-size: 1.5rem;
  cursor:grab;
  display:flex;
  align-items:center;
  gap:.3rem;
  box-shadow:0 2px 5px rgba(0,0,0,.15);
}

.token img{
  width:26px;
  height:26px;
}

/* Sentences */
.sentence-card{
  background:#fff;
  padding:1rem;
  border-radius:.8rem;
  border:1px solid var(--border);
  margin-bottom:1rem;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
}

.number{
  font-weight:800;
  font-size:1.3rem;
  margin-right:.45rem;
  color: var(--latte);
}

.word{
  display:inline-block;
  padding:.15rem .25rem;
  position:relative;
}

.word.drop-target{
  outline: 3px dashed var(--accent);
  border-radius:.25rem;
  background:#fff5fb;
}

/* Intro highlighting */
.intro{
  text-decoration: underline wavy var(--sage) 2px;
  text-underline-offset:4px;
  background:#f0f7f1;
  padding: 0 .2rem;
  border-radius:.2rem;
}

/* Comma */
.comma-here{
  font-size: 1.5rem;
  font-weight:900;
  color: var(--accent);
  cursor:pointer;
}

/* Feedback */
.correct{
  background:#ecf8ec !important;
  box-shadow: inset 0 0 0 2px var(--good);
}

.incorrect{
  background:#ffe6ef !important;
  box-shadow: inset 0 0 0 2px var(--bad);
}
</style>
</head>

<body>

<header>
  <h1 class="title">Introductory Phrases: Comma or No Comma?</h1>
  <div class="tagline">@WritersCafe208</div>
</header>

<!-- Teacher rule box -->
<div class="teacher-box">
  <img src="https://upload.wikimedia.org/wikipedia/commons/1/15/Red_Apple.png">
  <div class="rule">
    <strong>Teacher Rule:</strong> Write your classroom rule for punctuating sentences with introductory phrases here!
  </div>
</div>

<main>

<p style="text-align:center; max-width:750px; margin:0 auto 1.2rem;">
  Drag a comma from the café‑themed bank. Place it after the introductory phrase only when it appears at the beginning of the sentence.
</p>

<div class="toolbar">
  <button id="round1Btn" class="ghost">Round 1</button>
  <button id="round2Btn" class="ghost">Round 2</button>
  <button id="checkBtn">Check</button>
  <button id="resetBtn" class="secondary">Reset</button>
</div>

<!-- Bank -->
<div id="bank"></div>

<!-- Sentences -->
<div id="sentences"></div>

<div id="results" style="text-align:center; margin-top:1rem; font-weight:700;"></div>

</main>

<script>
/* ============================================================
   TWO ROUNDS OF SENTENCES — with click-to-remove commas
============================================================ */
const ROUNDS = [
{
  name:"Round 1",
  items:[
    { id:"1", intro:"After the final bell", rest:"the hallway exploded with chatter.", beginning:true },
    { id:"2", intro:"In the early morning", rest:"the stadium lights still glowed.", beginning:true },
    { id:"3", intro:"Before the science quiz", rest:"Mia reviewed her notes.", beginning:true },
    { id:"4", intro:"With a nervous smile", rest:"Jordan stepped onto the stage.", beginning:true },
    { id:"5", before:"The hallway exploded with chatter", intro:"after the final bell.", beginning:false },
    { id:"6", before:"The stadium lights still glowed", intro:"in the early morning.", beginning:false },
    { id:"7", before:"Mia reviewed her notes", intro:"before the science quiz.", beginning:false },
    { id:"8", before:"Jordan stepped onto the stage", intro:"with a nervous smile.", beginning:false }
  ]
},
{
  name:"Round 2",
  items:[
    { id:"1", intro:"During the thunderstorm", rest:"we sheltered under the awning.", beginning:true },
    { id:"2", intro:"On the bus ride home", rest:"I finished Chapter Five.", beginning:true },
    { id:"3", intro:"At the edge of the field", rest:"a hawk hovered low.", beginning:true },
    { id:"4", intro:"Without warning", rest:"the lights flickered and went out.", beginning:true },
    { id:"5", before:"We sheltered under the awning", intro:"during the thunderstorm.", beginning:false },
    { id:"6", before:"I finished Chapter Five", intro:"on the bus ride home.", beginning:false },
    { id:"7", before:"A hawk hovered low", intro:"at the edge of the field.", beginning:false },
    { id:"8", before:"The lights flickered and went out", intro:"without warning.", beginning:false }
  ]
}
];

let currentRound = 0;
let placements = {}; // sentenceID → wordIndex where comma is dropped

/* ============================================================
   BUILD ROUND
============================================================ */
function buildRound(){
  const round = ROUNDS[currentRound];
  const box = document.getElementById("sentences");
  box.innerHTML = "";
  placements = {};

  buildBank();

  round.items.forEach(item=>{
    const card = document.createElement("div");
    card.className="sentence-card";

    const num = document.createElement("span");
    num.className="number";
    num.textContent = item.id + ".";

    const line = document.createElement("span");

    let fullWords = [];

    if(item.beginning){
      fullWords = (item.intro + " " + item.rest).split(" ");
    } else {
      fullWords = (item.before + " " + item.intro).split(" ");
    }

    fullWords.forEach((w,i)=>{
      const span = document.createElement("span");
      span.className="word";
      span.textContent = w + " ";
      span.dataset.sid = item.id;
      span.dataset.index = i;
      makeDropzone(span);
      line.appendChild(span);
    });

    // highlight intro phrase words
    if(item.beginning){
      const introLength = item.intro.split(" ").length;
      for(let i=0; i<introLength; i++){
        const w = line.children[i];
        w.classList.add("intro");
      }
    } else {
      const beforeLength = item.before.split(" ").length;
      const totalBefore = beforeLength;
      const totalIntro = item.intro.split(" ").length;
      for(let i=totalBefore; i<totalBefore+totalIntro; i++){
        const w = line.children[i];
        w.classList.add("intro");
      }
    }

    card.appendChild(num);
    card.appendChild(line);
    box.appendChild(card);
  });
}

/* ============================================================
   BUILD INFINITE COMMA BANK
============================================================ */
function buildBank(){
  const bank = document.getElementById("bank");
  bank.innerHTML = "";

  function makeToken(){
    const tok = document.createElement("div");
    tok.className="token";
    tok.draggable=true;
    tok.innerHTML = `<img src="https://cdn-icons-png.flaticon.com/512/685/685352.png"><span>,</span>`;
    prepDraggable(tok);
    bank.appendChild(tok);
  }

  // generate 12 tokens (they infinitely respawn)
  for(let i=0;i<12;i++){ makeToken(); }
}

/* DRAG */
function prepDraggable(node){
  node.addEventListener("dragstart", e=>{
    e.dataTransfer.setData("text/plain","comma");
  });
}

/* DROP + CLICK TO REMOVE */
function makeDropzone(el){
  el.addEventListener("dragover", e=>{
    e.preventDefault();
    el.classList.add("drop-target");
  });

  el.addEventListener("dragleave", ()=> el.classList.remove("drop-target"));

  el.addEventListener("drop", e=>{
    e.preventDefault();
    el.classList.remove("drop-target");

    const sid = el.dataset.sid;
    const index = parseInt(el.dataset.index);

    placements[sid] = index;

    // insert comma into word
    el.innerHTML = el.textContent + `<span class="comma-here">,</span>`;

    // make comma removable
    el.querySelector(".comma-here").onclick = ()=>{
      el.querySelector(".comma-here").remove();
      delete placements[sid];
    };

    buildBank(); // refresh infinite commas
  });
}

/* CHECK ANSWERS */
function checkAnswers(){
  const round = ROUNDS[currentRound];
  let correct = 0;

  document.querySelectorAll(".word").forEach(w=>{
    w.classList.remove("correct","incorrect");
  });

  round.items.forEach(item=>{
    const sid = item.id;
    const placed = placements[sid];
    let correctIndex = null;

    if(item.beginning){
      correctIndex = item.intro.split(" ").length - 1;
    }

    // beginning → comma required
    if(item.beginning){
      if(placed === correctIndex){
        mark(sid, correctIndex, "correct");
        correct++;
      } else {
        if(placed != null) mark(sid, placed, "incorrect");
        mark(sid, correctIndex, "incorrect");
      }
    }

    // ending → comma forbidden
    else {
      if(placed == null){
        correct++;
      } else {
        mark(sid, placed, "incorrect");
      }
    }
  });

  document.getElementById("results").textContent =
    `${correct}/${round.items.length} correct`;
}

/* Mark function */
function mark(sid, idx, cls){
  if(idx == null) return;
  const w = document.querySelector(`.word[data-sid="${sid}"][data-index="${idx}"]`);
  if(w) w.classList.add(cls);
}

/* Reset */
function resetRound(){
  buildRound();
  document.getElementById("results").textContent="";
}

/* Buttons */
document.getElementById("round1Btn").onclick = ()=>{ currentRound=0; resetRound(); };
document.getElementById("round2Btn").onclick = ()=>{ currentRound=1; resetRound(); };
document.getElementById("checkBtn").onclick = checkAnswers;
document.getElementById("resetBtn").onclick = resetRound;

/* Start */
buildRound();
</script>

</body>
</html>
