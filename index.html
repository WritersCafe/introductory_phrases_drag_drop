<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Introductory Phrases: Comma or No Comma?</title>

<style>
/* =========================
   Brand Palette (your colors)
   ========================= */
:root{
  --pink: #ff6fa9;          /* pink */
  --rose: #f4c2c2;          /* soft rose */
  --latte: #b08968;         /* latte brown */
  --creme: #fff8e7;         /* crème */
  --sage: #7fa37c;          /* sage green */
  --charcoal: #2f3437;      /* charcoal */

  --accent: var(--pink);
  --accent-weak: #ffdbe8;
  --good: var(--sage);
  --bad: var(--pink);
  --border: #e0d4c9;
  --shadow: 0 3px 10px rgba(0,0,0,.10);

  /* Composition tuning (adjust if you want to fine‑align to the background) */
  --content-left-col: 35%;          /* left gutter; pushes content right */
 --bg-pos-x: 59%;                  /* background horizontal focal point */
}

/* Base */
*{ box-sizing: border-box; }
body{
  margin:0;
  font-family: "Segoe UI", system-ui, -apple-system, Roboto, Arial, sans-serif;
  color: var(--charcoal);
  font-size: 20px;            /* accessible size for 7th grade */
  line-height: 1.75;
  background: none;           /* we use a full-screen background layer */
}

/* ===== Full-page background with soft overlay (prominent) ===== */
.page-bg{
  position: fixed;
  inset: 0;
  background-image: url('teen-cafe.png'); /* <-- your background file */
  background-size: cover;                 /* always fill screen */
  background-position: var(--bg-pos-x) center;  /* nudge focal point horizontally */
  background-attachment: fixed;           /* subtle parallax on desktop */
  z-index: -2;
}
/* Overlay + very soft vignette so text stays readable */
.page-bg::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(120% 140% at 80% 50%, rgba(0,0,0,.08), rgba(0,0,0,0) 45%),
    linear-gradient(to bottom, rgba(255,248,231,.76), rgba(255,248,231,.82) 30%, rgba(255,248,231,.88) 100%);
  z-index:-1;
}

/* Cards on top of the background (slightly translucent for more image) */
header, .teacher-box, .panel{
  background:#ffffffcc; /* ~80% white */
  backdrop-filter: blur(2px);
  border: 1px solid var(--border);
  border-radius:.9rem;
  box-shadow: var(--shadow);
}
@media (prefers-reduced-transparency: reduce){
  header, .teacher-box, .panel{ background:#fff; backdrop-filter:none; }
}

/* Header */
header{
  margin: 12px auto 10px;
  padding: 1rem .9rem .9rem;
  max-width: 1200px;
  border: 2px solid var(--latte);
}
.title{ margin:0; font-size: 2rem; font-weight: 800; }
.tagline{ margin-top:.25rem; font-size:1.05rem; color:var(--charcoal); opacity:.85; }

/* Teacher Rule Box */
.teacher-box{
  max-width: 1200px; margin:10px auto 14px; padding:1rem;
  display:flex; gap:1rem; align-items:flex-start;
}
.teacher-box img{ width:46px; height:46px; object-fit:cover; }
.teacher-box .rule{ font-size:1.05rem; }

/* Main layout: pushes content to the right to align with background composition */
main{ max-width: 1200px; margin: 0 auto 40px; padding: 0 clamp(12px, 4vw, 32px); }
.grid{
  display:grid; gap: clamp(12px, 2.5vw, 24px);
  grid-template-columns: 1fr;             /* mobile */
  align-items: start;
}
@media (min-width: 980px){
  .grid{
    /* left gutter (empty) + right content */
    grid-template-columns: minmax(0, var(--content-left-col)) minmax(320px, 1fr);
  }
}

/* Right column panels (Directions+Bank and Sentences) */
.panel{ padding: 1rem; }
.panel h3{ margin:.1rem 0 .6rem 0; }

/* Toolbar (rounds & check) */
.toolbar{
  display:flex; gap:.6rem; flex-wrap:wrap; align-items:center;
  margin:.4rem 0 .6rem;
}
button{
  padding:.55rem 1rem; border:none; border-radius:.6rem;
  font-weight:700; font-size:.98rem;
  background: var(--accent); color:#fff; cursor:pointer; box-shadow: var(--shadow);
}
button.secondary{ background: var(--charcoal); }
button.ghost{ background: var(--accent-weak); color: var(--accent); }

/* Comma Bank placed under Directions */
.bank{
  margin-top:.6rem;
  background:#fff2f6;
  border:2px dashed var(--border);
  border-radius:.8rem;
  padding:.7rem;
  min-height:82px;
  display:flex; flex-wrap:wrap; gap:.55rem;
}
.token{
  display:inline-flex; align-items:center; justify-content:center;
  padding:.35rem .6rem; font-size:1.6rem;
  background:#fff; border:2px solid var(--accent); border-radius:.7rem;
  cursor:grab; user-select:none; box-shadow:0 2px 6px rgba(0,0,0,.10);
}
/* No icon inside comma tokens */

/* Sentences */
.sentence-card{ padding:1rem; background:#ffffffcc; backdrop-filter: blur(2px); border:1px solid var(--border); border-radius:.9rem; box-shadow: var(--shadow); }
.number{ font-weight:800; font-size:1.25rem; color: var(--latte); margin-right:.5rem; }
.word{ display:inline-block; position:relative; padding:.1rem .25rem; }
.word.drop-target{ outline:3px dashed var(--accent); border-radius:.25rem; background:#fff5fb; }

/* Intro highlighting */
.intro{
  text-decoration: underline wavy var(--sage) 2px;
  text-underline-offset: 4px;
  background:#f0f7f1; padding:0 .2rem; border-radius:.2rem;
}

/* Inserted comma */
.comma-here{
  font-size:1.6rem; font-weight:900; color: var(--accent);
  cursor:pointer; margin-left:.1rem;
}

/* Feedback */
.correct{ background:#ecf8ec !important; box-shadow: inset 0 0 0 2px var(--good); }
.incorrect{ background:#ffe6ef !important; box-shadow: inset 0 0 0 2px var(--bad); }

.results{ text-align:center; font-weight:700; margin-top:.5rem; }
.small-note{ color:#666; font-size:.95rem; margin:.4rem 0 0; }
</style>
</head>

<body>
  <!-- Prominent background layer -->
  <div class="page-bg" aria-hidden="true"></div>

  <header>
    <h1 class="title">Introductory Phrases: Comma or No Comma?</h1>
    <div class="tagline">@WritersCafe208</div>
  </header>

  <!-- Teacher Rule Box -->
  <div class="teacher-box" role="note" aria-label="Teacher rule">
    <img alt="apple icon" src="https://upload.wikimedia.org/wikipedia/commons/1/15/Red_Apple.png" />
    <div class="rule">
      <strong>Teacher Rule:</strong>
      Use a comma <em>after</em> an introductory word, phrase, or dependent clause when it comes at the
      <b>beginning</b> of the sentence (before the main clause). Do <em>not</em> use a comma when the same
      element appears at the <b>end</b> of the sentence.<br/>
      <small>
        Example: <u>After the final bell</u>, we packed our bags. · We packed our bags <u>after the final bell</u>.
      </small>
    </div>
  </div>

  <main>
    <div class="grid">
      <!-- Column 1: empty spacer on desktop to align with background composition -->
      <div aria-hidden="true"></div>

      <!-- Column 2: content -->
      <div>
        <!-- Directions + Bank (one panel) -->
        <section class="panel">
          <h3>Directions</h3>
          <p>Drag a comma from the café‑themed bank.</p>
          <p>Place it <b>after the introductory phrase</b> only when it appears at the <b>beginning</b> of the sentence.</p>
          <p><b>You can click the comma to remove it</b> if you change your mind.</p>

          <div class="toolbar" aria-label="Round controls">
            <button id="round1Btn" class="ghost">Round 1</button>
            <button id="round2Btn" class="ghost">Round 2</button>
            <button id="checkBtn">Check</button>
            <button id="resetBtn" class="secondary">Reset</button>
          </div>

          <h3 style="margin-top:.2rem;">Comma Bank</h3>
          <div id="bank" class="bank" aria-label="Comma bank (drag from here)"></div>
          <p class="small-note">There are unlimited commas.</p>
        </section>

        <!-- Sentences -->
        <section class="panel">
          <div id="sentences"></div>
          <div id="results" class="results"></div>
        </section>
      </div>
    </div>
  </main>

  <script>
  /* =========================================
     Rounds & Sentences (7th-grade appropriate)
     ========================================= */
  const ROUNDS = [
    {
      name: "Round 1",
      items: [
        { id:"1", intro:"After the final bell", rest:"the hallway exploded with chatter.", beginning:true },
        { id:"2", intro:"In the early morning", rest:"the stadium lights still glowed.", beginning:true },
        { id:"3", intro:"Before the science quiz", rest:"Mia reviewed her notes.", beginning:true },
        { id:"4", intro:"With a nervous smile", rest:"Jordan stepped onto the stage.", beginning:true },

        { id:"5", before:"The hallway exploded with chatter", intro:"after the final bell.", beginning:false },
        { id:"6", before:"The stadium lights still glowed", intro:"in the early morning.", beginning:false },
        { id:"7", before:"Mia reviewed her notes", intro:"before the science quiz.", beginning:false },
        { id:"8", before:"Jordan stepped onto the stage", intro:"with a nervous smile.", beginning:false }
      ]
    },
    {
      name: "Round 2",
      items: [
        { id:"1", intro:"During the thunderstorm", rest:"we sheltered under the awning.", beginning:true },
        { id:"2", intro:"On the bus ride home", rest:"I finished Chapter Five.", beginning:true },
        { id:"3", intro:"At the edge of the field", rest:"a hawk hovered low.", beginning:true },
        { id:"4", intro:"Without warning", rest:"the lights flickered and went out.", beginning:true },

        { id:"5", before:"We sheltered under the awning", intro:"during the thunderstorm.", beginning:false },
        { id:"6", before:"I finished Chapter Five", intro:"on the bus ride home.", beginning:false },
        { id:"7", before:"A hawk hovered low", intro:"at the edge of the field.", beginning:false },
        { id:"8", before:"The lights flickered and went out", intro:"without warning.", beginning:false }
      ]
    }
  ];

  let currentRound = 0;
  // sentence id -> word index where a comma is placed
  const placements = new Map();

  /* Build comma bank (infinite source) */
  function buildBank(){
    const bank = document.getElementById('bank');
    bank.innerHTML = '';
    const makeToken = () => {
      const t = document.createElement('div');
      t.className = 'token';
      t.textContent = ',';                 // clean comma (no icon)
      t.draggable = true;
      t.addEventListener('dragstart', e => {
        // infinite source: token stays in the bank
        e.dataTransfer.setData('text/plain', 'comma');
      });
      bank.appendChild(t);
    };
    for (let i=0; i<14; i++) makeToken(); // visually plenty; logically infinite
  }

  /* Build the round’s sentences */
  function buildRound(){
    const container = document.getElementById('sentences');
    container.innerHTML = '';
    placements.clear();
    buildBank();

    const round = ROUNDS[currentRound];
    round.items.forEach(item => {
      const card = document.createElement('div');
      card.className = 'sentence-card';

      const num = document.createElement('span');
      num.className = 'number';
      num.textContent = item.id + '.';

      const line = document.createElement('span');

      // Words of the sentence
      const words = item.beginning
        ? (item.intro + ' ' + item.rest).split(' ')
        : (item.before + ' ' + item.intro).split(' ');

      words.forEach((w,i) => {
        const span = document.createElement('span');
        span.className = 'word';
        span.textContent = w + ' ';
        span.dataset.sid = item.id;
        span.dataset.index = String(i);
        makeDropzone(span);
        line.appendChild(span);
      });

      // Highlight introductory phrase
      if (item.beginning) {
        const introLen = item.intro.split(' ').length;
        for (let i = 0; i < introLen; i++) {
          const introWord = line.querySelector(`.word[data-index="${i}"]`);
          if (introWord) introWord.classList.add('intro');
        }
      } else {
        const beforeLen = item.before.split(' ').length;
        const total = words.length;
        for (let i = beforeLen; i < total; i++) {
          const introWord = line.querySelector(`.word[data-index="${i}"]`);
          if (introWord) introWord.classList.add('intro');
        }
      }

      card.appendChild(num);
      card.appendChild(line);
      container.appendChild(card);
    });

    document.getElementById('results').textContent = '';
  }

  /* Drag & Drop on each word boundary */
  function makeDropzone(node){
    node.addEventListener('dragover', e => {
      e.preventDefault();
      node.classList.add('drop-target');
    });
    node.addEventListener('dragleave', () => node.classList.remove('drop-target'));
    node.addEventListener('drop', e => {
      e.preventDefault();
      node.classList.remove('drop-target');

      const sid = node.dataset.sid;
      const index = parseInt(node.dataset.index, 10);

      // Only one comma per sentence at a time: remove existing
      document.querySelectorAll(`.comma-here[data-sid="${sid}"]`).forEach(c => c.remove());

      // Insert comma span after this word
      const comma = document.createElement('span');
      comma.className = 'comma-here';
      comma.dataset.sid = sid;
      comma.textContent = ',';

      // Click (or Enter/Space) to remove
      comma.setAttribute('role','button');
      comma.setAttribute('tabindex','0');
      const remove = () => { comma.remove(); placements.delete(sid); };
      comma.addEventListener('click', remove);
      comma.addEventListener('keydown', ev => {
        if (ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); remove(); }
      });

      node.appendChild(comma);
      placements.set(sid, index);
    });
  }

  /* Check answers */
  function checkAnswers(){
    // Clear prior marks
    document.querySelectorAll('.word').forEach(w => w.classList.remove('correct','incorrect'));

    const round = ROUNDS[currentRound];
    let correct = 0;
    const total = round.items.length;

    round.items.forEach(item => {
      const sid = item.id;
      const placed = placements.has(sid) ? placements.get(sid) : null;

      let shouldIndex = null;
      if (item.beginning) {
        // comma should be after last word of the intro phrase
        shouldIndex = item.intro.split(' ').length - 1;
      }

      if (item.beginning){
        if (placed === shouldIndex){ mark(sid, shouldIndex, 'correct'); correct++; }
        else {
          if (placed !== null) mark(sid, placed, 'incorrect');
          mark(sid, shouldIndex, 'incorrect');
        }
      } else {
        // Intro at end → no comma
        if (placed === null) correct++;
        else mark(sid, placed, 'incorrect');
      }
    });

    document.getElementById('results').textContent = `${correct}/${total} correct`;
  }

  function mark(sid, idx, cls){
    if (idx === null) return;
    const node = document.querySelector(`.word[data-sid="${sid}"][data-index="${idx}"]`);
    if (node) node.classList.add(cls);
  }

  /* Buttons */
  document.getElementById('round1Btn').addEventListener('click', () => { currentRound = 0; buildRound(); });
  document.getElementById('round2Btn').addEventListener('click', () => { currentRound = 1; buildRound(); });
  document.getElementById('checkBtn').addEventListenerment.getElementById('resetBtn').addEventListener('click', () => buildRound());

  // Initialize
  buildRound();
  </script>
</body>
</html>
